<div class="bootstrap-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12 excel mb-3">
        <button mat-raised-button (click)="exportToExcel()">Export to Excel
        </button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2 col-sm-12">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>Educators</mat-label>
          <mat-select [(value)]="educator" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let c of allCourses"
              [value]="c.educator.educator_name">{{c.educator.educator_name}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2 col-sm-12">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>Courses</mat-label>
          <mat-select [(value)]="courses" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let course of allCourses"
              [value]="course.course_name">{{course.course_name}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>CR/VCR</mat-label>
          <mat-select [(value)]="mode" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option value="CR">CR</mat-option>
            <mat-option value="VCR">VCR</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>Start date</mat-label>
          <mat-select [(value)]="start" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let c of allCourses" [value]="c.start_date">{{c.start_date | date }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>End date</mat-label>
          <mat-select [(value)]="end" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let c of allCourses" [value]="c.end_date">{{c.end_date | date }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-2">
        <mat-form-field appearance="fill" class="w100">
          <mat-label>Contact Session Timings</mat-label>
          <mat-select [(value)]="contact" [(ngModel)]="sortoption">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let c of allCourses"
              [value]="c.contact_session_timing">{{c.contact_session_timing}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>

</div>
<!-- {{sortoption}} -->
<div class="container-fluid">
  <div class="row ">
    <div class="ctable">
      <table id="exceltable" class="table table-responsive table-striped">
        <thead>
          <tr>
            <th>#</th>
            <th>Course Name</th>
            <th>Type</th>
            <th>CR/VCR</th>
            <th>Location</th>
            <th>Educator</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Month</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Contact Session Timing</th>
            <th>Venue</th>
            <th>Slots to be Opened</th>
            <th>Lex Link</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of allCourses | coursesSort: sortoption; index as i">
            <td>{{i+1}}</td>
            <td>{{c.course_name}}</td>
            <td>{{c.course_type}}</td>
            <td>{{c.course_mode}}</td>
            <td>{{getLocation(c.location)}}</td>
            <td>{{c.educator.educator_name | titlecase}}</td>
            <td>{{c.start_date | date}}</td>
            <td>{{c.end_date | date}}</td>
            <td>{{c.month}}</td>
            <td>{{timeShort(c.start_time)}}</td>
            <td>{{timeShort(c.end_time)}}</td>
            <td>{{timeConverter(c.contact_session_timing)}}</td>
            <td>{{getLocation(c.venue)}}</td>
            <td>{{c.no_of_slots}}</td>
            <td>{{c.registration_link}}</td>
            <td><button mat-mini-fab color="primary" type="button" class="btn btn-primary" data-bs-toggle="modal"
                data-bs-target="#exampleModal" (click)="onEdit(i)"><mat-icon>edit</mat-icon></button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<!-- {{allCourses[0]|json}} -->
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Update {{singleCourse.course_name}}</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="col-md-12">
            <mat-form-field class="w100">
              <mat-label>Educator</mat-label>
              <input type="text" [(ngModel)]="singleCourse.educator.educator_name" disabled="true"
                [ngModelOptions]="{standalone: true}" matInput placeholder="Enter here">
              <mat-error>Slots is required</mat-error>
            </mat-form-field>
          </div>
          <!-- <div class="col-md-12">
            <mat-form-field class="w100">
              <mat-label>Enter Course Start Date</mat-label>
              <input matInput [matDatepicker]="picker1" [(ngModel)]="singleCourse.start_date" disabled="true"
                [ngModelOptions]="{standalone: true}">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
              <mat-error>Date is required</mat-error>
            </mat-form-field>
          </div>
          <div class="col-md-12">
            <mat-form-field class="w100">
              <mat-label>Enter Course End Date</mat-label>
              <input matInput [matDatepicker]="picker2" [(ngModel)]="singleCourse.end_date" disabled="true"
                [ngModelOptions]="{standalone: true}">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2></mat-datepicker>
              <mat-error>Date is required</mat-error>
            </mat-form-field>
          </div> -->
          <div class="col-md-12">
            <mat-form-field class="w100">
              <mat-label>Slots to be Opened</mat-label>
              <input type="text" [(ngModel)]="singleCourse.no_of_slots" [ngModelOptions]="{standalone: true}" matInput
                placeholder="Enter here">
              <mat-error>Slots is required</mat-error>
            </mat-form-field>
          </div>
          <div class="col-md-12">
            <div class="w100 time">
              <mat-label>Contact Session Timing</mat-label> <br>
              <div class="inline"><mat-label>from:</mat-label>
                <input type="time" [(ngModel)]="singleCourse.start_time" [ngModelOptions]="{standalone: true}">
              </div>
              <div class="inline"><mat-label>to:</mat-label>
                <input type="time" [(ngModel)]="singleCourse.end_time" [ngModelOptions]="{standalone: true}">
              </div>
            </div>
          </div>
          
        </form>
      </div>
      <div class="modal-footer">
        <p class="text-success">{{updateMessage}}</p>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="onUpdate()">Save changes</button>
      </div>
    </div>
  </div>
</div>